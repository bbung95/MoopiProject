ALTER TABLE	USERS	DROP CONSTRAINTS	USERS_FK_INTEREST1	;
ALTER TABLE	USERS	DROP CONSTRAINTS	USERS_FK_INTEREST2	;
ALTER TABLE	USERS	DROP CONSTRAINTS	USERS_FK_INTEREST3	;
ALTER TABLE	MOIM	DROP CONSTRAINTS	MOIM_FK_ID	;
ALTER TABLE	MOIM	DROP CONSTRAINTS	MOIM_FK_INTEREST	;
ALTER TABLE	MEMBER	DROP CONSTRAINTS	MEMBER_FK_ID	;
ALTER TABLE	MEMBER	DROP CONSTRAINTS	MEMBER_FK_MMNO	;
ALTER TABLE	MEETING	DROP CONSTRAINTS	MEETING_FK_MMNO	;
ALTER TABLE	MEETING	DROP CONSTRAINTS	MEETING_FK_MTID	;
ALTER TABLE	MEETING_FLASH_MEMBER	DROP CONSTRAINTS	MEFL_FK_ID	;
ALTER TABLE	FLASH	DROP CONSTRAINTS	FLASH_FK_ID	;
ALTER TABLE	FLASH	DROP CONSTRAINTS	FLASH_FK_INTEREST	;
ALTER TABLE	COIN	DROP CONSTRAINTS	COIN_FK_ID	;
ALTER TABLE	COIN	DROP CONSTRAINTS	COIN_FK_FLASHNO	;
ALTER TABLE	PAYMENT	DROP CONSTRAINTS	PAYMENT_FK_ID	;
ALTER TABLE	LETTER	DROP CONSTRAINTS	LETTER_FK_ID	;
ALTER TABLE	LETTER	DROP CONSTRAINTS	LETTER_FK_TARGET	;
ALTER TABLE	NOTICE	DROP CONSTRAINTS	NOTICE_FK_ID	;
ALTER TABLE	BOARD	DROP CONSTRAINTS	BOARD_FK_ID	;
ALTER TABLE	BOARD	DROP CONSTRAINTS	BOARD_FK_MMNO	;
ALTER TABLE	REPLY	DROP CONSTRAINTS	REPLY_FK_ID	;
ALTER TABLE	REPLY	DROP CONSTRAINTS	REPLY_FK_BDNO	;
ALTER TABLE	FOLLOW_LIKE	DROP CONSTRAINTS	FOLLOWLIKE_FK_ID	;
ALTER TABLE	BOARD_FILE	DROP CONSTRAINTS	BDFILE_FK_BDNO	;
ALTER TABLE	REPORT	DROP CONSTRAINTS	REPORT_FK_ID	;






drop table meeting_flash_member;      
drop table meeting;        
drop table member;
drop table coin;
drop table payment;
drop table letter;
DROP TABLE IF EXISTS `NOTICE`;
drop table reply;
drop table board_file;
drop table board;
drop table follow_like;
drop table badge_list;
drop table report;
drop table flash;
drop table moim;
drop table users;
drop table interest;

CREATE TABLE USERS(
	USER_ID			VARCHAR(50) PRIMARY KEY 
,	PWD			VARCHAR(20) not null
,	USER_NAME		VARCHAR(50) not null
,	PHONE 			VARCHAR(11)  NOT NULL
,	BIRTH			DATE					 NOT NULL
,	AGE			INT(11)		NOT NULL
,	GENDER			VARCHAR(15)	 		 NOT NULL
,	JOIN_PATH		CHAR(1)  NOT NULL
,	REGDATE			DATE    NOT NULL
,	USER_ROLE		VARCHAR(5)				 NOT NULL
,	FULL_ADDR		VARCHAR(100)			 NOT NULL
,	ADDR			VARCHAR(10)			 NOT NULL
,	NICKNAME		VARCHAR(50)			 NOT NULL
,	PROFILE_IMAGE		VARCHAR(100)
,	PROFILE_CONTENT		VARCHAR(300)
,	INTEREST_FIRST		INT(11)
,	INTEREST_SECOND		INT(11)
,	INTEREST_THIRD		INT(11)
,	MYHOME_STATE		CHAR(1)
,	STATE_REASON		VARCHAR(150)
,	STATE_REGDATE		DATE
,	COIN				INT(11)
,	BADGE				CHAR(1)
);

CREATE TABLE MOIM(
	MM_NO			INT(11) PRIMARY KEY AUTO_INCREMENT	
,	MM_NAME		VARCHAR(50)  not null
,	MM_CONTENT		VARCHAR(300)  not null
,	MM_IMAGE		VARCHAR(100)  not null
,	MM_MAX_COUNT		INT(11) not null
,	MM_CURRENT_COUNT	INT(11)  NOT NULL
,	MM_CONSTRUCTOR		VARCHAR(50) not null
,	MM_REGDATE		DATE  not null
,	MM_INTEREST		INT(11) not null
,	MM_ADDR		VARCHAR(10)  not null
,	MM_STATE		CHAR(1) not null
,	MM_MIN_AGE		INT(11)
,	MM_MAX_AGE		INT(11)
,	MM_TYPE			CHAR(1) not null
);

CREATE TABLE INTEREST(
	INTEREST_NO		INT(11) PRIMARY KEY
,	INTEREST_NAME		VARCHAR(50)  NOT NULL
);

CREATE TABLE MEMBER(
	MEMBER_NO		INT(11) PRIMARY KEY AUTO_INCREMENT
,	MM_MEMBER_ID		VARCHAR(50) not null
,	MM_NO			INT(11) not null
,	MM_MEMBER_ROLE		VARCHAR(10) not null
,	MM_MEMBER_REGDATE	DATE  not null
);

CREATE TABLE MEETING(
	MT_NO			INT(11) PRIMARY KEY AUTO_INCREMENT	
,	MM_NO			INT(11) not null
,	MT_NAME		VARCHAR(100) not null
,	MT_CONTENT		VARCHAR(500) not null
,	MT_START_DATE		DATE not null
,	MT_END_DATE		DATE not null
,	MT_REGDATE		DATE  not null
,	MT_MAX_COUNT		INT(11) not null
,	MT_CURRENT_COUNT	INT(11)  NOT NULL
,	MT_CONSTRUCTOR		VARCHAR(50)  not null
,	MT_ADDR		VARCHAR(50) not null
,	MT_STATE		CHAR(1) not null
,	MT_MAP_X		VARCHAR(20) not null
,	MT_MAP_Y		VARCHAR(20) not null
);
 
CREATE TABLE MEETING_FLASH_MEMBER(
	MEFL_NO		INT(11) PRIMARY KEY AUTO_INCREMENT
,	MEFL_ID		VARCHAR(50) NOT NULL
,	TARGET_NO	INT(11) NOT NULL
,	JOIN_REGDATE	DATE  NOT NULL
,	JOIN_STATE	CHAR(1) NOT NULL
,	MEFL_TYPE	CHAR(1) NOT NULL
);

CREATE TABLE FLASH(
	FLASH_NO		INT(11) PRIMARY KEY AUTO_INCREMENT	
,	FLASH_NAME		VARCHAR(50)  NOT NULL
,	FLASH_CONTENT		VARCHAR(500)  NOT NULL
,	FLASH_FILE		VARCHAR(100)
,	FLASH_CONSTRUCTOR	VARCHAR(50)  NOT NULL
,	FLASH_REGDATE		DATE   NOT NULL
,	FLASH_TIME			DATE  NOT NULL
,	FLASH_CURRENT_COUNT		INT(11)  NOT NULL	
,	FLASH_MAX_COUNT		INT(11)  NOT NULL
,	FLASH_ADDR			VARCHAR(50)  NOT NULL
,	FLASH_STATE			CHAR(1) NOT NULL
,	FLASH_INTEREST	INT(11) NOT NULL
,	FLASH_MAP_X			VARCHAR(20) NOT NULL
,	FLASH_MAP_Y			VARCHAR(20)  NOT NULL
);
 
CREATE TABLE COIN(
	COIN_NO			INT(11) PRIMARY KEY AUTO_INCREMENT
,	COIN_REGDATE		DATE   NOT NULL
,	COIN_ROLE		VARCHAR(20)  NOT NULL
,	COIN_COUNT		INT(11)  NOT NULL
,	USER_ID			VARCHAR(50)  NOT NULL
,	FLASH_NO		INT(11)
);


CREATE TABLE PAYMENT(
	PAYMENT_NO		INT(11) PRIMARY KEY AUTO_INCREMENT AUTO_INCREMENT
,	PAYMENT_REGDATE	DATE   NOT NULL
,	PAYMENT_ROLE		VARCHAR(20)  NOT NULL
,	PAYMENT_USER_ID		VARCHAR(50)  NOT NULL
,	PAYMENT_PRICE		INT(11)  NOT NULL
,	PAYMENT_COIN_COUNT	INT(11)  NOT NULL
,	PAYMENT_UID		VARCHAR(100)  NOT NULL
);

CREATE TABLE LETTER(
	LETTER_NO			INT(11) PRIMARY KEY AUTO_INCREMENT
,	LETTER_USER_ID		VARCHAR(50) NOT NULL
,	LETTER_TARGET_ID	VARCHAR(50) NOT NULL
,	LETTER_CONTENT		VARCHAR(300) NOT NULL
,	LETTER_REGDATE		DATE  NOT NULL 
);

CREATE TABLE `NOTICE` (
  `NOTICE_NO` int NOT NULL AUTO_INCREMENT,
  `TO_USER_ID` varchar(50) NOT NULL,
  `NOTICE_BOARD_NO` int DEFAULT NULL,
  `NOTICE_MOIM_NO` int DEFAULT NULL,
  `NOTICE_FLASH_NO` int DEFAULT NULL,
  `NOTICE_MEETING_NO` int DEFAULT NULL,
  `NOTICE_REPLY_NO` int DEFAULT NULL,
  `NOTICE_LETTER_NO` int DEFAULT NULL,
  `NOTICE_CONTENT` varchar(100) NOT NULL,
  `NOTICE_REGDATE` date NOT NULL,
  `NOTICE_STATE` char(1) NOT NULL,
  `NOTICE_USER_ID` varchar(50) DEFAULT NULL,
  `CATEGORY` varchar(2) NOT NULL,
  PRIMARY KEY (`NOTICE_NO`)
) ENGINE=InnoDB AUTO_INCREMENT=131 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;



CREATE TABLE BOARD (
	BD_NO			INT(11) PRIMARY KEY AUTO_INCREMENT
,	BD_CATEGORY		CHAR(1) not null    
,	BD_WRITER		VARCHAR(50) not null    
,	BD_NAME		VARCHAR(100)	
,	BD_CONTENT		VARCHAR(2000) not null    
,	BD_REGDATE		DATE  not null    
,	BD_UPDATE		DATE
,	BD_STATE			CHAR(1)  not null    
,	BD_PASSWORD		VARCHAR(4)
,	BD_MM_NO		INT(11) 
);



create table REPLY(
	REPLY_NO		INT(11)  PRIMARY KEY AUTO_INCREMENT 
,	BD_NO			INT(11)  not null
,	REPLY_WRITER	VARCHAR(30) not null     
,	REPLY_CONTENT		VARCHAR(500) not null 
,	REPLY_FILE			VARCHAR(100) 
,	REPLY_REGDATE 		date not null
,	REPLY_STATE 		CHAR(1)  not null
);


CREATE TABLE FOLLOW_LIKE(
	FL_NO			INT(11) PRIMARY KEY AUTO_INCREMENT 
,	USER_ID			VARCHAR(50)  not null 
,	FL_TARGET		VARCHAR(50) not null   
,	FL_TYPE			CHAR(1) not null
);

CREATE TABLE BOARD_FILE(
	BD_NO			INT(11)  not null
,	BDFILE_NAME		VARCHAR(100) NOT NULL      
,	BDFILE_NO		INT(11) PRIMARY KEY AUTO_INCREMENT 
);


CREATE TABLE BADGE_LIST(
	BADGE_GET_NO		INT(11) PRIMARY KEY AUTO_INCREMENT
,	USER_ID			VARCHAR(50) NOT NULL          
,	BADGE_FILE_NAME		VARCHAR(100)  not null
);

CREATE TABLE REPORT(
	RP_NO			INT(11) PRIMARY KEY AUTO_INCREMENT
,	RP_BY_USERID		VARCHAR(50) not null
,	RP_TYPE			VARCHAR(20) not null
,	RP_CONTENT		VARCHAR(500) not null
,	RP_IMAGE		VARCHAR(100) 
,	RP_REGDATE		DATE   not null
,	RP_TARGET		VARCHAR(50)  not null
,	RP_CATEGORY		CHAR(1)	  not null
,	RP_RESULT_STATE		VARCHAR(30)
,	RP_RESULT_UPDATE	DATE
,	STATE_REASON		VARCHAR(200)
,   RP_TARGETBD INT(11)
,	RP_TARGETRE INT(11)
);

ALTER TABLE	USERS	ADD CONSTRAINT	USERS_FK_INTEREST1	FOREIGN KEY (	INTEREST_FIRST	) REFERENCES	INTEREST	(	INTEREST_NO	);
ALTER TABLE	USERS	ADD CONSTRAINT	USERS_FK_INTEREST2	FOREIGN KEY (	INTEREST_SECOND	) REFERENCES	INTEREST	(	INTEREST_NO	);
ALTER TABLE	USERS	ADD CONSTRAINT	USERS_FK_INTEREST3	FOREIGN KEY (	INTEREST_THIRD	) REFERENCES	INTEREST	(	INTEREST_NO	);
ALTER TABLE	MOIM	ADD CONSTRAINT	MOIM_FK_ID	FOREIGN KEY (	MM_CONSTRUCTOR	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	MOIM	ADD CONSTRAINT	MOIM_FK_INTEREST	FOREIGN KEY (	MM_INTEREST	) REFERENCES	INTEREST	(	INTEREST_NO	);
ALTER TABLE	MEMBER	ADD CONSTRAINT	MEMBER_FK_ID	FOREIGN KEY (	MM_MEMBER_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	MEMBER	ADD CONSTRAINT	MEMBER_FK_MMNO	FOREIGN KEY (	MM_NO	) REFERENCES	MOIM	(	MM_NO	);
ALTER TABLE	MEETING	ADD CONSTRAINT	MEETING_FK_MMNO	FOREIGN KEY (	MM_NO	) REFERENCES	MOIM	(	MM_NO	);
ALTER TABLE	MEETING	ADD CONSTRAINT	MEETING_FK_MTID	FOREIGN KEY (	MT_CONSTRUCTOR	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	MEETING_FLASH_MEMBER	ADD CONSTRAINT	MEFL_FK_ID	FOREIGN KEY (	MEFL_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	FLASH	ADD CONSTRAINT	FLASH_FK_ID	FOREIGN KEY (	FLASH_CONSTRUCTOR	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	FLASH	ADD CONSTRAINT	FLASH_FK_INTEREST	FOREIGN KEY (	FLASH_INTEREST	) REFERENCES	INTEREST	(	INTEREST_NO	);
ALTER TABLE	COIN	ADD CONSTRAINT	COIN_FK_ID	FOREIGN KEY (	USER_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	COIN	ADD CONSTRAINT	COIN_FK_FLASHNO	FOREIGN KEY (	FLASH_NO	) REFERENCES	FLASH	(	FLASH_NO	);
ALTER TABLE	PAYMENT	ADD CONSTRAINT	PAYMENT_FK_ID	FOREIGN KEY (	PAYMENT_USER_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	LETTER	ADD CONSTRAINT	LETTER_FK_ID	FOREIGN KEY (	LETTER_USER_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	LETTER	ADD CONSTRAINT	LETTER_FK_TARGET	FOREIGN KEY (	LETTER_TARGET_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	NOTICE	ADD CONSTRAINT	NOTICE_FK_ID	FOREIGN KEY (	NOTICE_TO_USER_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	BOARD	ADD CONSTRAINT	BOARD_FK_ID	FOREIGN KEY (	BD_WRITER	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	BOARD	ADD CONSTRAINT	BOARD_FK_MMNO	FOREIGN KEY (	BD_MM_NO	) REFERENCES	MOIM	(	MM_NO	);
ALTER TABLE	REPLY	ADD CONSTRAINT	REPLY_FK_ID	FOREIGN KEY (	REPLY_WRITER 	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	REPLY	ADD CONSTRAINT	REPLY_FK_BDNO	FOREIGN KEY (	BD_NO	) REFERENCES	BOARD	(	BD_NO	);
ALTER TABLE	FOLLOW_LIKE	ADD CONSTRAINT	FOLLOWLIKE_FK_ID	FOREIGN KEY (	USER_ID	) REFERENCES	USERS	(	USER_ID	);
ALTER TABLE	BOARD_FILE	ADD CONSTRAINT	BDFILE_FK_BDNO	FOREIGN KEY (	BD_NO	) REFERENCES	BOARD	(	BD_NO	);
ALTER TABLE	REPORT	ADD CONSTRAINT	REPORT_FK_ID	FOREIGN KEY (	RP_USER_ID	) REFERENCES	USERS	(	USER_ID	);
 
 
